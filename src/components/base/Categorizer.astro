---
import { slug } from '~/utils/toc'
import { UI } from '~/config'

interface Props {
  idx?: number
  text: string
  needId?: boolean
  wide?: boolean
}

const { idx, text, needId = false, wide = false } = Astro.props
const { maxGroupColumns } = UI.groupView
---

<div
  {...needId ? { id: slug(text) } : {}}
  class={`toc-heading relative h-24
    pointer-events-none select-none
    ${idx !== undefined ? 'slide-enter' : ''}`}
  style={idx !== undefined ? { '--enter-stage': idx - 2 } : undefined}
>
  {/* dotted background layer */}
  <div class="absolute inset-0 bg-dot-grid opacity-20 dark:opacity-15"></div>

  {
    !wide ? (
      <span
        class="absolute left--10 top--6
          text-8em font-bold leading-none
          color-transparent
          text-stroke-1 text-stroke-hex-777
          tracking-wide"
      >
        {text}
      </span>
    ) : (
      <span
        class={`absolute top-0
          text-5em lt-lg:text-4.5em lt-sm:(text-3.6em top-2)
          font-bold leading-none
          color-transparent
          text-stroke-1 text-stroke-hex-777
          tracking-wide
          ${maxGroupColumns === 3 ? 'left--4' : 'left-[14%] lt-lg:left--4'}`}
      >
        {text}
      </span>
    )
  }
</div>
